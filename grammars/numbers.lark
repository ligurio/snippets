##
## Num.*, make many kinds of numbers. see num
##

int = num.integer

num {
   dec-leading = [1-9]

   dec = [0-9]

   hex = [0-9a-f]

   # all numbers are equal, and some more than others, as they say
   dec-funny = "0" | "1" 
             | "15" | "16" | "17" 
             | "127" | "128" | "129"
             | "255" | "256" | "257" 
             | "32767" | "32768" | "32769" 
             | "65535" | "65536" | "65537" 
             | "2147483647" | "2147483648" | "2147483649" 
             | "4294967295" | "4294967296" | "4294967297" 
             | "9223372036854775807" | "9223372036854775808" | "9223372036854775809" 
             | "18446744073709551615" | "18446744073709551616" | "18446744073709551617"

   natural = dec | dec-leading dec+ | dec-funny

   sign = "+" | "-"

   maybe-sign = "" | sign

   integer = sign natural

   interesting-float 
      = "+0.0"  # 0x00000000
      | "-0.0"  # 0x80000000

      | "3.1415926535897932384626433832795"
      | "1.0"
      | "0.1"

      | "2.2250738585072016e-308" # 
      | "2.2250738585072015e-308" # 
      | "2.2250738585072014e-308" # DBL_MIN
      | "2.2250738585072013e-308" # 
      | "2.2250738585072012e-308" # 

      | "1.7976931348623159e+308" # 
      | "1.7976931348623158e+308" # 
      | "1.7976931348623157e+308" # DBL_MAX
      | "1.7976931348623156e+308" # 
      | "1.7976931348623155e+308" # 

      | "4.9406564584124655e-324"
      | "4.9406564584124654e-324"  # DBL_DENORM_MIN
      | "4.9406564584124653e-324"

      | "2.2204460492503132e-16"  #
      | "2.2204460492503131e-16"  # DBL_EPSILON
      | "2.2204460492503130e-16"  #

      | "3.40282348e+38"
      | "3.40282347e+38" # FLT_MAX
      | "3.40282346e+38"

      | "1.17549436e-38"
      | "1.17549435e-38" # FLT_MIN
      | "1.17549434e-38"

      | "1.19209291e-7"
      | "1.19209290e-7"  # FLT_EPSILON
      | "1.19209289e-7"

      | "1.40129847e-45"
      | "1.40129846e-45" # FLT_DENORMIN
      | "1.40129845e-45"

      | "1.18973149535723176503e+4932"
      | "1.18973149535723176502e+4932" # LDBL_MAX
      | "1.18973149535723176501e+4932"

      | "3.36210314311209350627e-4932"
      | "3.36210314311209350626e-4932" # LDBL_MIN
      | "3.36210314311209350625e-4932"

      | "1.08420217248550443402e-19"
      | "1.08420217248550443401e-19"   # LDBL_EPSILON
      | "1.08420217248550443400e-19"

      | "3.64519953188247460254e-4951"
      | "3.64519953188247460253e-4951" # LDBL_DENORM_MIN
      | "3.64519953188247460252e-4951"

      | "-6.828527034422786e-229"      # 0x9090909090909090 (ref blackhat


   float = interesting-float
         | integer "." dec+    # aa.bb
         | integer "." dec "e" maybe-sign natural # 12.34e-12

   rational = maybe-sign natural "/" natural # will also generate divisions by zero
   
   rational-nz = maybe-sign natural "/" dec-leading natural

   nl = 10

   # prefer the simpler types
   number = dec | (natural | (integer | (rational | float)))
}

