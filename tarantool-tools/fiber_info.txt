Script started on 2024-07-11 11:19:08+03:00 [TERM="xterm-color" TTY="/dev/pts/5" COLUMNS="147" LINES="29"]
bash: /home/sergeyb/.cargo/env: No such file or directory
-e: command not found
[?2004h]0;sergeyb@pony: ~/sources/lua-c-api-tests[01;32msergeyb@pony[00m:[01;34m~/sources/lua-c-api-tests[00m$ tarantool
[?2004lTarantool 2.11.3-0-gf933f77904
type 'help' for interactive help
[?2004htarantool> fiber.info({bt = true})top()[Kinfo({bt = true})top()[Kinfo({bt = true})top()[K[K(reverse-i-search)`': r': fiber.info({bt = t[7mr[mue})e': fiber = requi[7mre[m('fiber')[7mre[mquire('fiber')console = requi[7mre[m('console')[13Ptarantool> console = require('console')
[?2004l[?2004h---
...

tarantool> (reverse-i-search)`': r': console = requi[7mr[me('console')e': console = requi[7mre[m('console')q': console = [7mreq[muire('console')[4Pfiber = [7mreq[muire('fiber')[14Ptarantool> fiber = require('fiber')
[?2004l[?2004h---
...

tarantool> (reverse-i-search)`': f': fiber = require('[7mf[miber')i': fiber = require('[7mfi[mber')b': fiber = require('[7mfib[mer')e': fiber = require('[7mfibe[mr')r': fiber = require('[7mfiber[m')[7mfiber[m = require('fiber')[C[C[C[C[C[1P.info({bt = true})[C[C[C[C[C[Ctop()[K[16Ptarantool> fiber.top()
[?2004l[?2004h---
- error: fiber.top() is disabled. Enable it with fiber.top_enable() first
...

tarantool> (reverse-i-search)`': e': fib[7me[mr.top()n': fiber.top_[7men[mable()a': fiber.top_[7mena[mble()b': fiber.top_[7menab[mle()[15Ptarantool> fiber.top_enable()
[?2004l[?2004h---
...

tarantool> fiber.top_enable()()[K
[?2004l[?2004h---
- cpu:
    1/sched:
      instant: 100
      time: 0.000350554
      average: 99.67410378541
    101/lua:
      instant: 0
      time: 0
      average: 0
    102/on_shutdown:
      instant: 0
      time: 0
      average: 0
    103/interactive:
      instant: 0
      time: 7.8607e-05
      average: 0.17548257708699
  cpu_misses: 0
...

tarantool> fiber.top()_enable()()[K[K(reverse-i-search)`': c': console = require('[7mc[monsole')[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Co': console = require('[7mco[mnsole')n': console = require('[7mcon[msole')[7mcon[msole = require('console')[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cconsole.[7mcon[mnect('unix/:/tmp/tarantool.sock')[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[14Ptarantool> console.connect('unix/:/tmp/tarantool.sock')[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
[?2004l[?2004hconnected to unix/:/tmp/tarantool.sock
---
- true
...

unix/:/tmp/tarantool.sock> console.connect('unix/:/tmp/tarantool.sock')[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cfiber.top()[K_enable()
[?2004l[?2004h---
...

unix/:/tmp/tarantool.sock> fiber.top_enable()console.connect('unix/:/tmp/tarantool.sock')[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cfiber.top()[K
[?2004l[?2004h---
- cpu:
    105/gc:
      instant: 0
      time: 0
      average: 0
    108/vinyl.scheduler:
      instant: 0
      time: 0
      average: 0
    '119/WRK #6':
      instant: 0
      time: 0
      average: 0
    124/console/unix/:/tmp/tarantool.sock:
      instant: 0
      time: 1.88e-07
      average: 0
    '120/WRK #7':
      instant: 0
      time: 0
      average: 0
    107/memtx.gc:
      instant: 0
      time: 0
      average: 0
    '123/WRK #10':
      instant: 0
      time: 0
      average: 0
    109/vinyl.vylog_flusher:
      instant: 0
      time: 0
      average: 0
    103/on_shutdown:
      instant: 0
      time: 0
      average: 0
    104/test_engine.lua:
      instant: 0
      time: 0
      average: 0
    101/tasks_worker_fiber:
      instant: 0
      time: 0
      average: 0
    '121/WRK #8':
      instant: 0
      time: 0
      average: 0
    112/feedback_daemon:
      instant: 0
      time: 0.000570617
      average: 0
    '151/console/unix/:':
      instant: 0
      time: 4.028e-06
      average: 0
    1/sched:
      instant: 100
      time: 0.418776223
      average: 100
    102/box.watchable:
      instant: 0
      time: 0
      average: 0
    '122/WRK #9':
      instant: 0
      time: 0
      average: 0
    113/metrics_collector:
      instant: 0
      time: 0.045857151
      average: 0
    111/guard of feedback_daemon:
      instant: 0
      time: 0.000421561
      average: 0
    106/checkpoint_daemon:
      instant: 0
      time: 0
      average: 0
  cpu_misses: 0
...

unix/:/tmp/tarantool.sock> fiber.top()[K(reverse-i-search)`': [Ki': f[7mi[mber.top_enable()n': fiber.[7min[mfo({bt = true})[4h [4lf': fiber.[7minf[m[4h  [4lunix/:/tmp/tarantool.sock> fiber.inf
[?2004l[?2004h---
- 105:
    backtrace:
    - C: '#1  0x55db1b333f7d in gc_cleanup_fiber_f+397'
    - C: '#2  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#3  0x55db1b4173d5 in fiber_loop+85'
    - C: '#4  0x55db1b697101 in coro_init+81'
    csw: 4
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: gc
    fid: 105
  122:
    backtrace:
    - C: '#1  0x55db1b697101 in coro_init+81'
    csw: 3828
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: 'WRK #9'
    fid: 122
  106:
    backtrace:
    - C: '#1  0x55db1b41dec1 in fiber_cond_wait_timeout+97'
    - C: '#2  0x55db1b2ebaba in vy_scheduler_wait_checkpoint+74'
    - C: '#3  0x55db1b2aa120 in vinyl_engine_wait_checkpoint+16'
    - C: '#4  0x55db1b29b143 in engine_commit_checkpoint+51'
    - C: '#5  0x55db1b33531b in gc_do_checkpoint+139'
    - C: '#6  0x55db1b3343c3 in gc_checkpoint_fiber_f+419'
    - C: '#7  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#8  0x55db1b4173d5 in fiber_loop+85'
    - C: '#9  0x55db1b697101 in coro_init+81'
    csw: 26
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: checkpoint_daemon
    fid: 106
  123:
    backtrace:
    - C: '#1  0x55db1b697101 in coro_init+81'
    csw: 3889
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: 'WRK #10'
    fid: 123
  107:
    backtrace:
    - C: '#1  0x55db1b29cb0d in memtx_engine_gc_f(__va_list_tag*)+189'
    - C: '#2  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#3  0x55db1b4173d5 in fiber_loop+85'
    - C: '#4  0x55db1b697101 in coro_init+81'
    csw: 51
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: memtx.gc
    fid: 107
  124:
    backtrace:
    - C: '#1  0x55db1b422e68 in coio_wait+168'
    - C: '#2  0x55db1b3fbd0b in lbox_socket_iowait+155'
    - L: '#3  iowait in =[C]:-1'
    - L: '#4  do_wait in @builtin/socket.lua:355'
    - L: '#5  socket_readable in @builtin/socket.lua:367'
    - L: '#6  (unnamed) in @builtin/socket.lua:1149'
    - C: '#7  0x55db1b45ac35 in lua_pcall+117'
    - C: '#8  0x55db1b3f7b1f in luaT_call+15'
    - C: '#9  0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#10 0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#11 0x55db1b4173d5 in fiber_loop+85'
    - C: '#12 0x55db1b697101 in coro_init+81'
    csw: 9
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 1.88e-07
    name: console/unix/:/tmp/tarantool.sock
    fid: 124
  108:
    backtrace:
    - C: '#1  0x55db1b41dec1 in fiber_cond_wait_timeout+97'
    - C: '#2  0x55db1b2ea88d in vy_scheduler_f+2957'
    - C: '#3  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#4  0x55db1b4173d5 in fiber_loop+85'
    - C: '#5  0x55db1b697101 in coro_init+81'
    csw: 746
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: vinyl.scheduler
    fid: 108
  109:
    backtrace:
    - C: '#1  0x55db1b41dec1 in fiber_cond_wait_timeout+97'
    - C: '#2  0x55db1b2df8d8 in vy_log_flusher_f+88'
    - C: '#3  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#4  0x55db1b4173d5 in fiber_loop+85'
    - C: '#5  0x55db1b697101 in coro_init+81'
    csw: 11
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: vinyl.vylog_flusher
    fid: 109
  103:
    backtrace: []
    csw: 0
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: on_shutdown
    fid: 103
  102:
    backtrace:
    - C: '#1  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#2  0x55db1b4173d5 in fiber_loop+85'
    - C: '#3  0x55db1b697101 in coro_init+81'
    csw: 1
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: box.watchable
    fid: 102
  119:
    backtrace:
    - C: '#1  0x55db1b41dec1 in fiber_cond_wait_timeout+97'
    - C: '#2  0x55db1b2eb631 in vy_scheduler_dump+49'
    - C: '#3  0x55db1b2ace7d in vinyl_space_build_index+1805'
    - C: '#4  0x55db1b2fee04 in CreateIndex::prepare(alter_space*)+244'
    - C: '#5  0x55db1b3098de in alter_space_do(txn_stmt*, alter_space*)+446'
    - C: '#6  0x55db1b30362a in on_replace_dd_index(trigger*, void*)+2474'
    - C: '#7  0x55db1b4316b2 in trigger_run_list(rlist*, void*)+146'
    - C: '#8  0x55db1b4314a7 in trigger_run+231'
    - C: '#9  0x55db1b2f2f9b in space_on_replace+43'
    - C: '#10 0x55db1b317434 in txn_commit_stmt+884'
    - C: '#11 0x55db1b320798 in box_process_rw+360'
    - C: '#12 0x55db1b32923e in box_insert+142'
    - C: '#13 0x55db1b3c7aba in lbox_insert+170'
    - L: '#14 insert in =[C]:-1'
    - L: '#15 (unnamed) in @builtin/box/schema.lua:1715'
    - C: '#16 0x55db1b45ac35 in lua_pcall+117'
    - C: '#17 0x55db1b3f7b1f in luaT_call+15'
    - C: '#18 0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#19 0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#20 0x55db1b4173d5 in fiber_loop+85'
    - C: '#21 0x55db1b697101 in coro_init+81'
    csw: 51
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 524752
      used: 187
    time: 0
    name: 'WRK #6'
    fid: 119
  101:
    backtrace:
    - L: '#1  stall in =[C]:-1'
    - L: '#2  (unnamed) in @builtin/fiber.lua:98'
    - C: '#3  0x55db1b45ac35 in lua_pcall+117'
    - C: '#4  0x55db1b3f7b1f in luaT_call+15'
    - C: '#5  0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#6  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#7  0x55db1b4173d5 in fiber_loop+85'
    - C: '#8  0x55db1b697101 in coro_init+81'
    csw: 1
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: tasks_worker_fiber
    fid: 101
  111:
    backtrace:
    - C: '#1  0x55db1b3eeb8a in lbox_fiber_sleep+266'
    - L: '#2  pcall in =[C]:-1'
    - L: '#3  (unnamed) in @builtin/box/feedback_daemon.lua:455'
    - C: '#4  0x55db1b45ac35 in lua_pcall+117'
    - C: '#5  0x55db1b3f7b1f in luaT_call+15'
    - C: '#6  0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#7  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#8  0x55db1b4173d5 in fiber_loop+85'
    - C: '#9  0x55db1b697101 in coro_init+81'
    csw: 26
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0.000421561
    name: guard of feedback_daemon
    fid: 111
  120:
    backtrace:
    - C: '#1  0x55db1b697101 in coro_init+81'
    csw: 3906
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: 'WRK #7'
    fid: 120
  151:
    backtrace:
    - C: '#1  0x55db1b3f0850 in lbox_fiber_statof_map+800'
    - C: '#2  0x55db1b3f04bd in lbox_fiber_statof_bt+61'
    - C: '#3  0x55db1b419fee in fiber_stat+78'
    - C: '#4  0x55db1b3ee82b in lbox_fiber_info+59'
    - L: '#5  fn in =[C]:-1'
    - L: '#6  (unnamed) in @builtin/box/console.lua:429'
    - C: '#7  0x55db1b45ac35 in lua_pcall+117'
    - C: '#8  0x55db1b3f7b1f in luaT_call+15'
    - C: '#9  0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#10 0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#11 0x55db1b4173d5 in fiber_loop+85'
    - C: '#12 0x55db1b697101 in coro_init+81'
    csw: 6
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 4.331e-06
    name: 'console/unix/:'
    fid: 151
  112:
    backtrace:
    - C: '#1  0x55db1b41ee0f in fiber_channel_get_msg_timeout+495'
    - C: '#2  0x55db1b3f25ce in luaT_fiber_channel_get+174'
    - L: '#3  get in =[C]:-1'
    - L: '#4  (unnamed) in @builtin/box/feedback_daemon.lua:352'
    - C: '#5  0x55db1b45ac35 in lua_pcall+117'
    - C: '#6  0x55db1b3f7b1f in luaT_call+15'
    - C: '#7  0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#8  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#9  0x55db1b4173d5 in fiber_loop+85'
    - C: '#10 0x55db1b697101 in coro_init+81'
    csw: 18
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0.000570617
    name: feedback_daemon
    fid: 112
  104:
    backtrace:
    - C: '#1  0x55db1b3ef1ba in lbox_fiber_join+938'
    - L: '#2  join in =[C]:-1'
    - L: '#3  run_test in @test/fuzz/lua/test_engine.lua:1041'
    - L: '#4  (unnamed) in @test/fuzz/lua/test_engine.lua:1053'
    - C: '#5  0x55db1b45ac35 in lua_pcall+117'
    - C: '#6  0x55db1b3f7b1f in luaT_call+15'
    - C: '#7  0x55db1b3ee589 in lua_main+105'
    - C: '#8  0x55db1b3edd02 in run_script_f+2066'
    - C: '#9  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#10 0x55db1b4173d5 in fiber_loop+85'
    - C: '#11 0x55db1b697101 in coro_init+81'
    csw: 33
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: test_engine.lua
    fid: 104
  121:
    backtrace:
    - C: '#1  0x55db1b697101 in coro_init+81'
    csw: 3864
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0
    name: 'WRK #8'
    fid: 121
  113:
    backtrace:
    - C: '#1  0x55db1b3eeb8a in lbox_fiber_sleep+266'
    - L: '#2  pcall in =[C]:-1'
    - L: '#3  (unnamed) in @builtin/box/feedback_daemon.lua:420'
    - C: '#4  0x55db1b45ac35 in lua_pcall+117'
    - C: '#5  0x55db1b3f7b1f in luaT_call+15'
    - C: '#6  0x55db1b3f1001 in lua_fiber_run_f+97'
    - C: '#7  0x55db1b265009 in fiber_cxx_invoke(int (*)(__va_list_tag*), __va_list_tag*)+9'
    - C: '#8  0x55db1b4173d5 in fiber_loop+85'
    - C: '#9  0x55db1b697101 in coro_init+81'
    csw: 553
    max_slice:
      err: 1
      warn: 0.5
    memory:
      total: 520656
      used: 0
    time: 0.045857151
    name: metrics_collector
    fid: 113
...

unix/:/tmp/tarantool.sock> [?2004l[?2004h
tarantool> [?2004l[?2004h[?2004l[?2004h]0;sergeyb@pony: ~/sources/lua-c-api-tests[01;32msergeyb@pony[00m:[01;34m~/sources/lua-c-api-tests[00m$ [?2004l
exit

Script done on 2024-07-11 11:20:01+03:00 [COMMAND_EXIT_CODE="0"]
